# npm ä»‹ç»

`npm` æ˜¯éšåŒ `Node.js` ä¸€èµ·å®‰è£…çš„åŒ…ç®¡ç†å·¥å…·,èƒ½è§£å†³ `Node.js` ä»£ç éƒ¨ç½²ä¸Šçš„å¾ˆå¤šé—®é¢˜,å¸¸è§çš„ä½¿ç”¨åœºæ™¯æœ‰ä»¥ä¸‹å‡ ç§:

- å…è®¸ç”¨æˆ·ä» `NPM` æœåŠ¡å™¨ä¸‹è½½åˆ«äººç¼–å†™çš„ç¬¬ä¸‰æ–¹åŒ…åˆ°æœ¬åœ°ä½¿ç”¨;
- è®¸ç”¨æˆ·ä» `NPM` æœåŠ¡å™¨ä¸‹è½½å¹¶å®‰è£…åˆ«äººç¼–å†™çš„å‘½ä»¤è¡Œç¨‹åºåˆ°æœ¬åœ°ä½¿ç”¨;
- å…è®¸ç”¨æˆ·å°†è‡ªå·±ç¼–å†™çš„åŒ…æˆ–å‘½ä»¤è¡Œç¨‹åºä¸Šä¼ åˆ° `NPM` æœåŠ¡å™¨ä¾›åˆ«äººä½¿ç”¨;

åœ¨ç°åœ¨çš„å‰ç«¯ä¸–ç•Œé‡Œ,å‡ ä¹å·²ç»ç¦»ä¸å¼€ `npm` äº†,å…¶æä¾›çš„ä¾èµ–å®‰è£…ã€å¸è½½ã€å‡çº§ã€å‘å¸ƒç­‰ä¸€æ¡é¾™æœåŠ¡,ä½¿æˆ‘ä»¬åœ¨æ—¥å¸¸çš„å¼€å‘æ•ˆç‡æå‡äº†ä¸å°‘ã€‚

`npm` åˆ¶å®šäº†ä¸€ä¸ªåŒ…è§„èŒƒ,æ‰€è°“è§„èŒƒå°±æ˜¯ä¸€äº›æ ¼å¼å’Œçº¦å®š,æ¯”å¦‚ä½œä¸ºä¸€ä¸ª `npm` åŒ…ä¸­æ ¹ç›®å½•å¿…é¡»åŒ…å«ä¸€ä¸ª `package.json` æ–‡ä»¶,å¹¶çº¦å®šä» `package.json` æ–‡ä»¶é‡Œè¯»å–è¿™ä¸ªåŒ…çš„æ‰€æœ‰ä¿¡æ¯,åŒ…æ‹¬å®ƒçš„åå­—ã€ç‰ˆæœ¬å·ã€å®ƒä¾èµ–äºå“ªäº›åˆ«çš„åŒ…ç­‰;

å¹¶ä¸”åˆ›å»ºä¸€ä¸ª `node_modules` ç›®å½•ä¸“é—¨ç”¨æ¥å­˜æ”¾ç¬¬ä¸‰æ–¹ä¾èµ–,Node ä¸ºæ­¤æä¾›çš„æ”¯æŒæ˜¯å†…ç½®çš„ `require()`æ–¹æ³•é»˜è®¤ä¼šåˆ°è¿™ä¸ªç›®å½•ä¸‹å»æ£€ç´¢æ¨¡å—,è€Œæ— éœ€æ‰‹åŠ¨æŒ‡å®šè·¯å¾„ã€‚æœ‰äº†è¿™äº›è§„èŒƒ,ä¸€ä¸ªåŒ…çš„å¼€å‘ã€ä¾èµ–å®‰è£…ã€å‘å¸ƒç­‰éƒ½æ­¥éª¤éƒ½æ ‡å‡†åŒ–äº†,çœå¿ƒçœåŠ›ã€‚

æˆ‘ä»¬æ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬å¼€å§‹å­¦ä¹  `npm` ä¹‹æ—…å§!!!

# packages å’Œ modules çš„åŒºåˆ«

ä¸€ä¸ª `packages` æ˜¯ä¸€ä¸ªæ–‡ä»¶,åœ¨è¯¥æ–‡ä»¶çš„æ ¹ç›®å½•,å¿…é¡»åŒ…å«ä¸€ä¸ª `package.json` æ–‡ä»¶,é€šè¿‡è¯¥æ–‡ä»¶,ä½ å¯ä»¥å°†åŒ…å‘å¸ƒåˆ° `registry`ã€‚

`modules` æ˜¯ `node_modules` ç›®å½•ä¸‹å¯ä»¥è¢« `require()` å‡½æ•°åŠ è½½çš„ä»»ä½•æ–‡ä»¶å’Œç›®å½•,è¿™æ ·çš„ç§°ä¸ºæ¨¡å—,ä¸€ä¸ª `packages` ä¹Ÿæ˜¯æ¨¡å—,åªä¸è¿‡æ˜¯ç”±å¤šä¸ªæ¨¡å—ç»„æˆçš„åŒ…ã€‚

ä¸ºäº†è€ƒç ”é€šè¿‡ `require()` å‡½æ•°åŠ è½½åˆ°æ¨¡å—,å®ƒå¿…é¡»å…·æœ‰ä»¥ä¸‹ç‰¹å¾ä¹‹ä¸€:

- æ–‡ä»¶å¤¹ä¸­åŒ…å« `package.json` æ–‡ä»¶,å¹¶ä¸”åŒ…å«ä¸€ä¸ª `main` å­—æ®µä½œä¸ºå…¥å£æ–‡ä»¶;
- ä¸€ä¸ª `JavaScript` æ–‡ä»¶;

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a59704ff67b47ecb1912e4b662f316a~tplv-k3u1fbpfcp-watermark.image?)

åœ¨ä¸Šé¢çš„å›¾ä¸­ `moment.js` æ˜¯ä¸€ä¸ª `modules`,ä½†ä¸æ˜¯ä¸€ä¸ª `packages`,åœ¨å¤–éƒ¨å¼•å…¥å¯ä»¥ä½¿ç”¨ã€‚

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0a22aaeeeb624625b982c78f92403df6~tplv-k3u1fbpfcp-watermark.image?)

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­,åœ¨ `node_modules` ç›®å½•ä¸‹æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªåä¸º `moment` çš„æ–‡ä»¶,å¹¶ä¸”æ·»åŠ ä¸€ä¸ª `package.json` çš„æ–‡ä»¶,åœ¨æ–‡ä»¶ä¸­æ·»åŠ  `main` å­—æ®µ,è®¾ç½® `main.js` ä½œä¸ºæ–‡ä»¶çš„å…¥å£ã€‚

åœ¨è¿™é‡Œ,è°ƒç”¨ `const foo = require("moment");` å®é™…ä¸ŠåŠ è½½çš„æ˜¯ `moment` æ–‡ä»¶å¤¹ä¸‹çš„ `main.js` æ–‡ä»¶,æ‰€ä»¥ `foo` å‡½æ•°è¢«æ­£å¸¸è°ƒç”¨,æœ€ç»ˆè¾“å‡º `hi`ã€‚

# package.json è¯¦è§£

åœ¨å‰é¢çš„å†…å®¹ä¸­æˆ‘ä»¬å¤šæ¬¡è¯´åˆ° `package.json` çš„æ–‡ä»¶,é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æ€ä¹ˆåˆ›å»ºè¿™ä¸ªæ–‡ä»¶å‘¢,`npm` ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå‘½ä»¤ `npm init`,åœ¨ç»ˆç«¯è¾“å…¥è¯¥å‘½ä»¤,ä¼šæœ‰ä»¥ä¸‹é—®é¢˜å¹¶è¦æ±‚ä½ è¾“å…¥å›ç­”:

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fb95975c19ec48aa97f4ea2a9546085b~tplv-k3u1fbpfcp-watermark.image?)

æœ€ç»ˆä¼šåœ¨å½“å‰è·¯å¾„ç”Ÿæˆä¸€ä¸ª `package.json` æ–‡ä»¶,æ–‡ä»¶å†…å®¹æœ‰å¦‚ä¸‹ä»£ç æ‰€ç¤º:

```json
{
  "name": "moment",
  "version": "1.0.0",
  "description": "æè¿°ä¿¡æ¯",
  "main": "index.js",
  "dependencies": {
    "moment": "^1.0.0",
    "axios": "^1.2.6"
  },
  "devDependencies": {},
  "scripts": {
    "test": "node ./index.js"
  },
  "repository": {
    "type": "git",
    "url": "githubåœ°å€"
  },
  "keywords": ["react", "vue"],
  "author": "ä½œè€…",
  "license": "ISC"
}
```

é€šè¿‡ `npm init -y` ä¼šç”Ÿæˆä¸€ä¸ªé»˜è®¤çš„ `package.json` æ–‡ä»¶ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹ `package.json` æ–‡ä»¶ä¸­éƒ¨åˆ†å¸¸è§çš„å­—æ®µè¿›è¡Œè¯¦ç»†çš„è®²è§£ã€‚

## name

å¦‚æœä½ è¦å‘å¸ƒä½ çš„åŒ…,`name` å­—æ®µæ˜¯ä½ çš„ `package.json` æ–‡ä»¶ä¸­éå¸¸é‡è¦çš„å­—æ®µ,åœ¨ `npm` å®˜ç½‘æœç´¢åˆ°çš„åŒ…åå°±æ˜¯è¯¥å­—æ®µçš„å€¼,å¦‚æœä¸æ‰“ç®—å‘å¸ƒä½ çš„åŒ…,åˆ™ `name` æ˜¯å¯é€‰çš„,`name` çš„ å€¼éµå¾ªä»¥ä¸‹è§„åˆ™:

- å¿…é¡»å°äºæˆ–ç­‰äº 214 ä¸ªå­—ç¬¦;
- ä¸èƒ½ä»¥ `'.'` ã€ `"_"` ã€å¤§å†™å­—æ¯ã€ä¸­æ–‡å¼€å¤´,è¯¥å­—æ®µæœ€ç»ˆæˆä¸º `URL`ã€å‘½ä»¤è¡Œä¸Šçš„å‚æ•°å’Œæ–‡ä»¶å¤¹åç§°çš„ä¸€éƒ¨åˆ†ã€‚å› æ­¤,`name` ä¸èƒ½åŒ…å«ä»»ä½•é url å®‰å…¨å­—ç¬¦;
- ä¸èƒ½ä½¿ç”¨ `NOdejs` æ ¸å¿ƒæ¨¡å—ç›¸åŒçš„åç§°;
- è¿™ä¸ªåå­—å¯èƒ½ä¼šä½œä¸ºå‚æ•°ä¼ é€’ç»™ `require()` å‡½æ•°,æ‰€ä»¥å®ƒåº”è¯¥å¾ˆçŸ­,ä½†ä¹Ÿè¦åˆç†åœ°æè¿°;
- å¦‚æœä½ éœ€è¦å‘å¸ƒåŒ…,ä½ éœ€è¦æŸ¥çœ‹ `npm` çš„æ³¨å†Œè¡¨(`registry`)æ˜¯å¦å­˜åœ¨åŒååŒ…,å¦åˆ™ä½ å°†æ— æ³•å‘å¸ƒæˆåŠŸ,å½“ç„¶ä½ å¯ä»¥é€šè¿‡åæœŸä¿®æ”¹;

åœ¨å®é™…çš„å¼€å‘ä¸­,å¾ˆå¤šé¡¹ç›®éƒ½ä¸éœ€è¦å‘å¸ƒåˆ° `npm` ä¸Š,æ‰€ä»¥è¿™ä¸ª `name` åœ¨è¿™é‡Œå¹¶ä¸æ˜¯é‚£ä¹ˆé‡è¦,ä¸ä¼šå½±å“é¡¹ç›®æ­£å¸¸è¿ä½œ,å¯ä»¥å¿½ç•¥ã€‚

## version

å’Œ `name` ä¸€æ ·,å¦‚æœè¦å‘å¸ƒä½ çš„åŒ…,è¿™ä¸ªå­—æ®µå¾ˆé‡è¦,å¦‚æœä¸éœ€è¦,è¿™ä¸ªå­—æ®µåˆ™æ˜¾å¾—ä¸æ˜¯é‚£ä¹ˆé‡è¦äº†ã€‚

`version` å¿…é¡»å¯ä»¥è¢« [node-semver](https://github.com/npm/node-semver) è§£æ,`node-semver` ä½œä¸ºä¾èµ–é¡¹ä¸ `npm` æ†ç»‘åœ¨ä¸€èµ·ã€‚

`semver` çš„ç‰ˆæœ¬è§„èŒƒæ˜¯ `X.Y.Z`:

- `X` ä¸ºä¸»ç‰ˆæœ¬å·(`major`): é€šå¸¸åœ¨æ¶‰åŠé‡å¤§åŠŸèƒ½æ›´æ–°,äº§ç”Ÿäº†ç ´åæ€§å˜æ›´æ—¶ä¼šæ›´æ–°æ­¤ç‰ˆæœ¬å·;
- `Y` ä¸ºæ¬¡ç‰ˆæœ¬å·(`Minor`): åœ¨å¼•å…¥äº†æ–°åŠŸèƒ½,ä½†å¹¶æœªäº§ç”Ÿç ´åæ€§å˜æ›´,ä¾ç„¶å‘ä¸‹å…¼å®¹æ—¶æ›´æ–°æ­¤ç‰ˆæœ¬å·;
- `Z` ä¸ºä¿®è®¢å·(`Patch`): åœ¨ä¿®å¤äº†ä¸€äº›é—®é¢˜,ä½†æœªäº§ç”Ÿç ´åæ€§å˜æ›´æ—¶ä¼šæ›´æ–°æ­¤ç‰ˆæœ¬å·;

é™¤äº† `X.Y.Z` è¿™æ ·çš„ç‰ˆæœ¬å·,è¿˜æœ‰ `premajor | preminor | prepatch | prerelease ` è¿™æ ·çš„ç‰ˆæœ¬å·,è¿™äº›å±äºæµ‹è¯•ç‰ˆæœ¬,å¾ˆå¤šæ—¶å€™ä¸€äº›æ–°æ”¹åŠ¨,å¹¶ä¸èƒ½ç›´æ¥å‘å¸ƒåˆ°ç¨³å®šç‰ˆæœ¬ä¸Š,è¿™æ˜¯å¯ä»¥å‘å¸ƒä¸€ä¸ªé¢„å‘å¸ƒç‰ˆæœ¬,ä¸ä¼šå½±å“åˆ°ç¨³å®šç‰ˆæœ¬ã€‚

å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹ `npm` åŒ…çš„ç‰ˆæœ¬ä¿¡æ¯,å¦‚æƒ³è¦æŸ¥çœ‹çš„ react çš„:

- æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬

```sh
npm view react version
```

- æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬

```sh
npm view react versions
```

æˆ‘ä»¬å¯ä»¥é€šè¿‡ `child_process` æ‰§è¡Œè¯¥å‘½ä»¤ä»¥è·å–æŸçš„åŒ…çš„ç‰ˆæœ¬,è¿™ä¸ªæ–¹æ³•å°†åœ¨åé¢çš„è„šæ‰‹æ¶ä¸­ç”¨åˆ°,å…·ä½“æ“ä½œè¯·çœ‹ä»¥ä¸‹ä»£ç :

```js
const cp = require("child_process");

cp.exec("npm view react version", (err, stdout, stderr) => {
  console.log(stdout); // 18.2.0
});
```

## description

`description` å­—æ®µç”¨æ¥æè¿°è¿™ä¸ªåŒ…,å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²,ä¹Ÿå¯ä»¥æ˜¯ä¸­æ–‡,åœ¨æœç´¢çš„æ—¶å€™å¯ä»¥çœ‹åˆ°è¯¥åŒ…çš„æè¿°,å¹¶ä¸”è¯¥æè¿°ä¹Ÿå¯ä»¥ä½œä¸ºæœç´¢çš„å…³é”®è¯ã€‚

ä¾‹å¦‚ `react` ä¸­çš„ `description` å­—æ®µçš„å€¼ä¸º `React is a JavaScript library for building user interfaces.`,é€šè¿‡æœç´¢ `"React is"` èƒ½æ˜¾ç¤ºä¼šæœ‰ä»¥ä¸‹ç»“æœ:

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/41b9524e1b2e4128b2e9a242a88a0659~tplv-k3u1fbpfcp-watermark.image?)

## keywords

`keywords` å­—æ®µåœ¨é‡Œé¢æ”¾å…³é”®å­—,å¥½çš„å…³é”®è¯å¯ä»¥å¸®åŠ©å¼€å‘è€…åœ¨ `npm` å®˜ç½‘ä¸Šæ›´å¥½çš„æœç´¢åˆ°æ­¤é¡¹ç›®,å¢åŠ æ›å…‰ç‡ã€‚ä¾‹å¦‚ `axios` çš„ `keywords` å¦‚ä¸‹:

```json
"keywords": [
  "xhr",
  "http",
  "ajax",
  "promise",
  "node"
],
```

## homepage

é¡¹ç›®ä¸»é¡µçš„é“¾æ¥,é€šå¸¸æ˜¯é¡¹ç›® `github` é“¾æ¥,é¡¹ç›®å®˜ç½‘æˆ–è€…æ–‡æ¡£é¦–é¡µ,å¦‚æœæ˜¯ `npm` åŒ…,ä¼šåœ¨è¿™é‡Œæ˜¾ç¤º:

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/163f302153ce4660909401b274a5cf0f~tplv-k3u1fbpfcp-watermark.image?)

## bugs

`bugs` å­—æ®µè¡¨ç¤ºé¡¹ç›®æäº¤é—®é¢˜çš„åœ°å€,è¯¥å­—æ®µæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡,æœ€å¸¸è§çš„ `bugs` æ˜¯ `github` çš„ issue,ä¾‹å¦‚ `react` ä¸­çš„ `bugs` æ˜¯è¿™æ ·çš„:

```json
"bugs": "https://github.com/facebook/react/issues"
```

## license

[license](https://docs.npmjs.com/cli/v9/configuring-npm/package-json#license) å­—æ®µè¡¨ç¤ºé¡¹ç›®çš„å¼€æºè®¸å¯è¯,ä½ åº”è¯¥ä¸ºä½ çš„åŒ…æŒ‡å®šä¸€ä¸ªè®¸å¯è¯,æ–¹ä¾¿å…¶ä»–å¼€å‘è€…çŸ¥é“å¦‚ä½•å…è®¸ä»–ä»¬ä½¿ç”¨å®ƒ,ä»¥åŠä½ å¯¹ä»–æ–½åŠ çš„ä»»ä½•é™åˆ¶,ä¾‹å¦‚:

```json
"license": "ISC"
```

## repository

`repository` å­—æ®µç”¨äºæŒ‡å®šä»£ç æ‰€åœ¨çš„ä½ç½®,é€šå¸¸æ˜¯ `github`,å¦‚æœæ˜¯ `npm` åŒ…,åˆ™ä¼šåœ¨åŒ…çš„é¦–é¡µä¸­æ˜¾ç¤º:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d44b0a7a50454291849126691224a21f~tplv-k3u1fbpfcp-watermark.image?)

## files

`files` å­—æ®µæ˜¯ä¸€ä¸ªæ•°ç»„,å½“éœ€è¦é¡¹ç›®è¿›è¡Œ `npm` å‘å¸ƒæ—¶,å¯ä»¥é€šè¿‡ `files` å­—æ®µæŒ‡å®šå“ªäº›æ–‡ä»¶éœ€è¦å‘å¸ƒåˆ° `registry` æ¥æ§åˆ¶ `npm` åŒ…å¤§å°,å¦‚æœæŒ‡å®šçš„æ˜¯æ–‡ä»¶å¤¹,é‚£ä¹ˆè¯¥æ–‡ä»¶å¤¹ä¸‹é¢çš„æ‰€æœ‰æ–‡ä»¶éƒ½ä¼šè¢«æäº¤,ä¾‹å¦‚ `react` çš„é…ç½®æ˜¯è¿™æ ·çš„,å¦‚ä¸‹ä»£ç æ‰€ç¤º:

```json
"files": [
  "LICENSE",
  "README.md",
  "index.js",
  "cjs/",
  "umd/",
  "jsx-runtime.js",
  "jsx-dev-runtime.js",
  "react.shared-subset.js"
]
```

## main å’Œ browser

`main` å­—æ®µç”¨æ¥æŒ‡å®šåŒ…çš„å…¥å£å…¥å£æ–‡ä»¶,åœ¨ä¸Šé¢çš„å†…å®¹å°±å¿½ç•¥ä¸è®²äº†,å¦‚æœä¸è®¾ç½®,åˆ™é»˜è®¤ä½¿ç”¨åŒ…çš„æ ¹ç›®å½•ä¸­çš„ `index.js` æ–‡ä»¶ä½œä¸ºå…¥å£ã€‚

`main` å­—æ®µå¯ä»¥åœ¨ `browser` ç¯å¢ƒå’Œ `Nodejs` ç¯å¢ƒéƒ½å¯ä»¥ä½¿ç”¨,å¦‚æœ ä½¿ç”¨ `browser` å­—æ®µ,åˆ™è¡¨æ˜åªèƒ½åœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹ä½¿ç”¨,ä¸èƒ½ç”¨äºæœåŠ¡ç«¯ã€‚

## type

`type` å­—æ®µè¡¨ç¤ºåœ¨ `Node` ç¯å¢ƒä¸­å¯ä»¥ä½¿ç”¨çš„æ¨¡å—åŒ–æ–¹å¼,é»˜è®¤æ˜¯ `CommonJs`,å¦å¤–è¿˜å¯ä»¥é€‰æ‹© `EsModule`ã€‚

## bin

ä¸€äº›åŒ…çš„ä½œè€…å¸Œæœ›åŒ…å¯ä»¥ä½œä¸ºå‘½ä»¤è¡Œå·¥å…·ä½¿ç”¨,é…ç½®å¥½ `bin` å­—æ®µä¹‹å,é€šè¿‡ `npm install package_name  -g` å‘½ä»¤å¯ä»¥å°†è„šæœ¬æ·»åŠ åˆ°æ‰§è¡Œè·¯å¾„ä¸­,ä¹‹åå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ç›´æ¥æ‰§è¡Œã€‚

`bin` å­—æ®µçš„ä¸»è¦ä½œç”¨å¯ä»¥çœ‹ [åœ¨ç»ˆç«¯é‡Œè¾“å…¥ npm start åéƒ½å‘ç”Ÿäº†å•¥ ğŸ˜®ğŸ˜®ğŸ˜®](https://juejin.cn/post/7187368174952644665#heading-3) è¿™ç¯‡æ–‡ç« ã€‚

## exports

`exports` å­—æ®µå¯ä»¥é…ç½®ä¸åŒç¯å¢ƒå¯¹åº”çš„æ¨¡å—å…¥å£æ–‡ä»¶,å¹¶ä¸”å½“ä»–å­˜åœ¨æ—¶,å®ƒçš„ä¼˜å…ˆçº§æœ€é«˜,å½“ `package.json` æ–‡ä»¶ä¸­å­˜åœ¨ `exports` å­—æ®µ,è®¾ç½®çš„ `main` å­—æ®µä¼šå¤±æ•ˆ,åœ¨ `react` ä¸­çš„ `package.json` æ–‡ä»¶ä¸­çš„ `exports` å­—æ®µæœ‰å¦‚ä¸‹é…ç½®:

```json
"exports": {
  ".": {
    "react-server": "./react.shared-subset.js",
    "default": "./index.js"
  },
  "./package.json": "./package.json",
  "./jsx-runtime": "./jsx-runtime.js",
  "./jsx-dev-runtime": "./jsx-dev-runtime.js",
  "./src/*": "./src/*"
},
```

è¿™ä¸ªé…ç½®ç›¸å½“äº `weboack` ä¸­çš„ `resolve.alies` é…ç½®è·¯å¾„åˆ«å,è¯·çœ‹ä¸‹é¢çš„ä¾‹å­,åœ¨ `node_modules` æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª `moment` æ–‡ä»¶,å¹¶ä¸”æ·»åŠ  `package.json` æ–‡ä»¶è®©å…¶ä½œä¸ºä¸€ä¸ª `npm` æ¨¡å—,é€šè¿‡ `require('moment')` ä¼šæŸ¥æ‰¾åˆ°å½“å‰æ–‡ä»¶å¤¹,å¹¶é€šè¿‡ `main` å­—æ®µæˆ–è€… `exports` å­—æ®µæŸ¥æ‰¾å½“å‰å­—æ®µçš„å…¥å£,è¯·çœ‹å¦‚ä¸‹ä»£ç æ‰€ç¤º:

```json
"exports": {
".":{
  "require":"./test.js"
}
```

åœ¨ä¸Šé¢çš„ä»£ç ä¸­,ä½¿ç”¨ `require('moment')` åˆ™è¡¨ç¤ºä¼šè‡ªåŠ¨å¯¼å…¥ `moment` åŒ…ä¸­çš„ `test.js` æ–‡ä»¶,æ‰€ä»¥åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­å¯¼å…¥ä¼šæœ‰ä»¥ä¸‹è¾“å‡º:

```js
// momentåŒ…ä¸­çš„ test.js
function foo() {
  return "test";
}

module.exports = foo;

const foo = require("moment");

console.log(foo()); // test
```

å†åœ¨ `package.json` ä¸­çš„ `exports` å­—æ®µä¸­æ·»åŠ è¿™è¡Œä»£ç :

```json
"./src": {
  "require": "./src/moment.js"
}
```

å½“åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­ä½¿ç”¨ `require('moment/src')` è¿›è¡Œå¯¼å…¥æ—¶,å®é™…ä¸Šå¯¼å…¥çš„æ˜¯ `moment/src` ç›®å½•ä¸‹çš„ `moment.js` æ–‡ä»¶,é»˜è®¤æƒ…å†µä¸‹ä¼š `require('moment/src')` ä¼šåŠ è½½ `index.js`,å› ä¸ºæŒ‰ç…§ `require` è§„åˆ™ä¼šå…ˆæŸ¥æ‰¾ `index.js`,å…·ä½“ç¤ºä¾‹å¦‚ä¸‹ä»£ç æ‰€ç¤º:

```js
// moment/src/moment.js

function bar(params) {
  return "moment.js";
}

module.exports = bar;

// moment/src/index.js

function bar(params) {
  return "index.js";
}

module.exports = bar;

const bar = require("moment/src");

console.log(bar()); // moment.js
```

åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­ä½¿ç”¨ `require('moment/src')` æœ€ç»ˆä¼šè¾“å‡º `moment.js`,å¦‚æœå°† `exports` å­—æ®µåˆ é™¤ä¼šè¾“å‡º `index.js`,æ›´å¤š `require` ç»†èŠ‚å¯ä»¥å‚è€ƒ [æ·±å…¥æµ…å‡º CommonJs](https://juejin.cn/post/7166039059867893767) è¿™ç¯‡æ–‡ç« ã€‚

## config ç”¨äºè®¾ç½® `script` å­—æ®µé‡Œçš„è„šæœ¬è¿è¡Œæ˜¯çš„å‚æ•°,å¦‚è®¾ç½® `prot` ä¸º**3000**:

```json
"config": {
  "port": "8080"
}
```

å¹¶ä¸”åœ¨ `script` å­—æ®µä¸‹æ·»åŠ  `dev`å±æ€§,å€¼è®¾ç½®ä¸º `nodemon index.js`,ç»ˆç«¯è¿è¡Œ `npm run dev`

```json
"scripts": {
  "dev": "nodemon index.js"
},
```

åœ¨æ‰§è¡Œè„šæœ¬çš„æ—¶å€™,æˆ‘ä»¬å¯ä»¥é€šè¿‡ `process.env.npm_package_config_port` è¿™ä¸ªå˜é‡è®¿é—®åˆ° `3000`

```js
console.log(process.env.npm_package_config_port); // 3000
```

## dependencies

`dependencies` å­—æ®µè¡¨ç¤ºè¿è¡Œä¾èµ–,ä¹Ÿå°±æ˜¯é¡¹ç›®ä¸­ç”Ÿäº§ç¯å¢ƒä¸‹éœ€è¦ç”¨åˆ°çš„ä¾èµ–,ä¾‹å¦‚ `react`ã€`vue`ã€`axios` ç­‰ `npm` åŒ…,ä½¿ç”¨ `npn install <packagename>` æˆ–è€… `npm install <packagename> --save` æ—¶,ä¼šè¢«è‡ªåŠ¨æ’å…¥åˆ°è¯¥å­—æ®µä¸­:

```json
  "dependencies": {
    "axios": "^1.2.6",
    "react": "^18.2.0",
    "shelljs": "^0.8.5"
  },
```

## devDependencies

`devDependencies` å­—æ®µè¡¨ç¤ºå¼€å‘é˜¶æ®µæ—¶éœ€è¦çš„ä¾èµ–åŒ…,ä¾‹å¦‚ `webpack`ã€`eslint`ã€`sass`,è¯¥ä¾èµ–ç”¨äºæå‡å¼€å‘é€Ÿåº¦,å’Œ `dependencies` ä¸åŒçš„æ˜¯,è¯¥å­—æ®µåªéœ€è¦åœ¨å¼€å‘é˜¶æ®µä¸­ä½¿ç”¨,ä¸éœ€è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨,è¦ä½¿ä¾èµ–å®‰è£…åˆ° `devDependencies` å­—æ®µä¸Š,å¯ä»¥ä½¿ç”¨ `npm install <packagename> --save-dev` æˆ–è€… `npm install <packagename> -D`

## dependencies æ‰©å±•

åœ¨ä¾èµ–åŒ…ä¸­åé¢çš„å‚æ•°å°±æ˜¯ç‰ˆæœ¬,è¿™äº›ç‰ˆæœ¬ä¿¡æ¯æœ‰ä»¥ä¸‹è§„åˆ™:

- `version`: è¡¨ç¤ºç¡®å®šçš„ç‰ˆæœ¬å·;
- `>version`: å¤§äºå½“å‰ç‰ˆæœ¬;
- `~version`: è¡¨ç¤ºä¸»ç‰ˆæœ¬ `X` å’Œæ¬¡ç‰ˆæœ¬ `Y` ä¿æŒä¸å˜,ä¿®è®¢å· `Z` æ°¸è¿œå®‰è£…æœ€æ–°çš„ç‰ˆæœ¬;
- `^version`: è¡¨ç¤ºä¸»ç‰ˆæœ¬ `X` ä¿æŒä¸å˜,æ¬¡ç‰ˆæœ¬ `Y` å’Œä¿®è®¢å· `Z` æ°¸è¿œå®‰è£…æœ€æ–°çš„ç‰ˆæœ¬;
- `1.2.x`: è¡¨ç¤ºè¯¥ç‰ˆæœ¬ä¸­çš„ `x` å¯ä»¥æ˜¯ä»»ä½•ç¬¦åˆè§„èŒƒçš„å€¼;
- `*`å’Œ `""`: è¡¨ç¤ºåŒ¹é…ä»»ä½•ç‰ˆæœ¬;
- `version1 - version2`: è¡¨ç¤º version<= `x` >= version;
- `version1 || version2`: è¡¨ç¤ºåªè¦å…¶ä¸­ä¸€ä¸ªç¬¦åˆå³å¯;
- `latest`: ä»£è¡¨æœ€æ–°ç‰ˆæœ¬;
- `path/path/path`: æä¾›åˆ°åŒ…å«åŒ…çš„æœ¬åœ°ç›®å½•çš„è·¯å¾„,æœ¬åœ°è·¯å¾„å¯ä»¥ä½¿ç”¨ `npm install` ä¿å­˜,è¯¥æ–‡ä»¶ä¼šè¢«ä¿å­˜åœ¨ `node_modules` ç›®å½•ä¸‹,ä¾‹å¦‚,åœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª `bar` çš„æ–‡ä»¶å¹¶ä¸”åœ¨ `package.json` ä¸­æ·»åŠ ä»¥ä¸‹å­—æ®µ:

```json
"dependencies": {
  "bar": "file:./bar"
},
```

åœ¨ `bar` çš„æ–‡ä»¶ä¸­åˆ›å»º `index.js` æ–‡ä»¶,å¹¶ç¼–å†™ä»¥ä¸‹ä»£ç :

```js
function foo() {
  return "hi";
}

module.exports = foo;
```

é€šè¿‡æ‰§è¡Œ `npm install` ä¼šæŠŠè¯¥æ–‡ä»¶é“¾æ¥åˆ° `node_modules` ç›®å½•æ–‡ä»¶ä¸‹,åœ¨æ ¹ç›®å½•ä¸­ç¼–å†™ä»¥ä¸‹ä»£ç :

```js
const bar = require("bar");

console.log(bar());
```

æ‰§è¡Œå‘½ä»¤ `node .\index.js`,ä½ ä¼šå‘ç° `hi` ä¼šè¢«æ­£å¸¸è¾“å‡ºäº†ã€‚

## private

`private` å­—æ®µå¯ä»¥é˜²æ­¢æˆ‘ä»¬æ„å¤–åœ°å°†ç§æœ‰åº“å‘å¸ƒåˆ° `registry`,åªéœ€å°† `private` å­—æ®µè®¾ç½®ä¸º `true` å³å¯:

```json
"private": true
```

## @ ä½œç”¨åŸŸ

å·²çŸ¥æ‰€æœ‰çš„ `npm` åŒ…éƒ½æœ‰ä¸€ä¸ªåå­—,ä½†æ˜¯éšç€ç”¨æˆ·é‡çš„å¢å¤§,`npm` åŒ…çš„åŒ…åå°±å‡ºç°äº†è¢«å ç”¨çš„é—®é¢˜,å ç”¨åå…¶ä»–äººå°±ä¸èƒ½ä½¿ç”¨äº†,å½“ç„¶ `npm` ä¹Ÿå®˜æ–¹ä¸æ˜¯é—²ç€,ä»–ä»¬æä¾›äº†ä¸€ä¸ªä½œç”¨åŸŸçš„æ¦‚å¿µ,è¯¥ä½œç”¨åŸŸéµå¾ªåŒ…åçš„é€šå¸¸è§„åˆ™,å³ `url` å®‰å…¨å­—ç¬¦,åœ¨åŒ…åä½¿ç”¨æ—¶,åœ¨ä½œç”¨åŸŸå‰é¢æ·»åŠ ä¸€ä¸ª `@` ç¬¦å·,è¡¨ç¤ºè¿™ä¸ªæ˜¯ä¸€ä¸ªä½œç”¨åŸŸ,åœ¨åé¢åŠ ä¸€ä¸ªæ–œæ ,ä¾‹å¦‚:

```js
@somescope/somepackagename
```

æ¯ä¸ª `npm` ç”¨æˆ·æˆ–è€…ç»„ç»‡éƒ½æœ‰è‡ªå·±çš„ä½œç”¨åŸŸ,å®ƒå¯ä»¥æ˜¯ä½ çš„ç”¨æˆ·åã€è‡ªå·±åˆ›å»ºçš„ç»„ç»‡å,åªæœ‰ä½ å¯ä»¥åœ¨ä½ çš„ä½œç”¨åŸŸä¸­æ·»åŠ åŒ…,è¿™å°±æ„å‘³ç€ä½ ä¸å¿…æ‹…å¿ƒåˆ«äººä¼šæŠ¢åœ¨ä½ å‰é¢å–ä½ çš„åŒ…å,ç±»ä¼¼äºä½ çš„ `github`,ä½ å¯ä»¥å–ä»»ä½•çš„ä»“åº“åç§°,åªéœ€åç§°åˆæ³•ä¸”åœ¨ä½ è‡ªå·±çš„ä»“åº“ä¸­ä¸å­˜åœ¨åŒåä»“åº“ã€‚

ä½œç”¨åŸŸåŒ…é€šè¿‡åœ¨ `npm install` ä¸­å¼•ç”¨å®ƒçš„åç§°(å‰é¢åŠ @ç¬¦å·)æ¥å®‰è£…:

```sh
npm install @myorg/mypackage
```

åœ¨ `package.json` ä¸­æœ‰ä»¥ä¸‹çš„å½¢å¼:

```json
"dependencies": { "@myorg/mypackage": "^1.3.0" }
```

å› ä¸ºä½œç”¨åŸŸåŒ…å®‰è£…åœ¨ä½œç”¨åŸŸæ–‡ä»¶å¤¹ä¸­,æ‰€ä»¥åœ¨ä»£ç ä¸­éœ€è¦å®ƒä»¬æ—¶,å¿…é¡»åŒ…å«ä½œç”¨åŸŸçš„åç§°:

```js
require("@myorg/mypackage");
```

## script

`script` å­—æ®µæ”¯æŒè®¸å¤šå†…ç½®è„šæœ¬å’Œå®ƒä»¬çš„é¢„è®¾ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ä»¥åŠä»»æ„è„šæœ¬,è¿™äº›ä½ éƒ½å¯ä»¥ä½¿ç”¨ `npm run <stage>` æ¥æ‰§è¡Œ,ä¾‹å¦‚å½“ä½ è¦æ‰§è¡Œ `npm run dev` å‘½ä»¤,å…·æœ‰åŒ¹é…åç§°çš„ `Pre` å’Œ `Post` å‘½ä»¤ä¹Ÿå°±ä½œä¸ºè¿™äº›å‘½ä»¤ä¸€èµ·æ‰§è¡Œ,æ‰§è¡Œé¡ºåºä¸º `predev` - `dev` - `postdev `,ä¾‹å¦‚åœ¨ `package.json` æ–‡ä»¶ä¸­æœ‰å¦‚ä¸‹å®šä¹‰:

```json
"scripts": {
  "dev": "node index.js",
  "predev": "node pre.js",
  "postdev": "node post.js"
},
```

å½“æ‰§è¡Œ `npm run dev`,ä¼šé¦–å…ˆæ‰§è¡Œ `pre.js` æ–‡ä»¶,ç„¶åæ‰§è¡Œ `index.js` æ–‡ä»¶,å†æœ€åæ‰§è¡Œ `post.js` æ–‡ä»¶ã€‚

æ›´å¤šå…³äº `scirpt` å­—æ®µçš„ç»†èŠ‚å°†ä¼šåœ¨å¦ä¸€ç¯‡æ–‡ç« ä¸­è®²è§£,æ•¬è¯·æœŸå¾…ã€‚

# å‚è€ƒæ–‡ç« 

- ä¹¦ç±: `æ·±å…¥æµ…å‡ºNodejs`;
- [npm å®˜ç½‘](https://docs.npmjs.com/cli/v9/configuring-npm/package-json#people-fields-author-contributors)
- [å­—èŠ‚è·³åŠ¨æŠ€æœ¯å›¢é˜Ÿ](https://juejin.cn/post/7145001740696289317)

# ç»“å°¾

æ•´ä¸ªç³»åˆ—ä¼šæ¯”è¾ƒé•¿,å¦‚æœæƒ³é˜…è¯»åç»­çš„æ¨æ–‡,å¯ä»¥ç‚¹èµ+å…³æ³¨ ğŸ˜ğŸ˜ğŸ˜
